syntax = "proto3";

package events;

service Events {
    // Send an event
    rpc TriggerEvent(TriggerEventRequest) returns (TriggerEvenResponse);
}

message KV {
    string key = 1;
    string value = 2;
}

message Data {
    repeated KV data = 1;
}

message SourceIdentifier {
    string source_id = 1;
}

message EventDetails {
    // Event payload
    Data payload = 1;
    // Event name, like files/changed
    string name = 2;
    optional Data metadata = 3;
}

message Event {
    SourceIdentifier identifier = 1;
    EventDetails details = 2;
}

message TriggerEventRequest {}
message TriggerEvenResponse {}